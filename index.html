<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tabungan Nikah 250 Juta</title>
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #ffecd2, #fcb69f); margin: 0; padding: 0; }
    h1 { text-align: center; color: #2c3e50; margin-top: 20px; }
    h2, h3 { text-align: center; color: #2c3e50; }
    .container { max-width: 750px; margin: 20px auto; background: #fff; padding: 25px; border-radius: 20px; box-shadow: 0 8px 20px rgba(0,0,0,0.15); }
    .progress { background: #ddd; border-radius: 30px; overflow: hidden; margin: 20px 0; height: 30px; }
    .progress-bar { height: 100%; background: linear-gradient(90deg, #ff6a00, #ee0979); width: 0; color: white; text-align: center; line-height: 30px; font-weight: bold; transition: width 0.5s ease; border-radius: 30px; }
    ul { padding: 0; list-style: none; margin-top: 15px; }
    li { background: #fdf2e9; margin: 10px 0; padding: 14px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 3px 8px rgba(0,0,0,0.1); font-size: 14px; }
    li span { display: block; }
    button { border: none; padding: 8px 14px; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: bold; transition: transform 0.2s; }
    button:hover { transform: scale(1.05); }
    .add-btn { background: #27ae60; color: white; }
    .add-btn:hover { background: #229954; }
    .delete-btn { background: #e74c3c; color: white; }
    .delete-btn:hover { background: #c0392b; }
    .edit-btn { background: #f39c12; color: white; }
    .edit-btn:hover { background: #d68910; }
    .reset-btn { display: block; margin: 20px auto; background: #8e44ad; color: white; }
    .reset-btn:hover { background: #732d91; }
    .input-group { text-align: center; margin-bottom: 20px; }
    select, input[type=number] { padding: 10px; border-radius: 8px; border: 1px solid #ccc; margin-right: 8px; font-size: 14px; }
    select:focus, input[type=number]:focus { outline: none; border-color: #ff6a00; box-shadow: 0 0 8px rgba(255,106,0,0.4); }
    .countdown { text-align: center; font-size: 18px; margin-top: 25px; color: #2c3e50; background: #f9ebea; padding: 15px; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
  </style>
</head>
<body>
  <div class="container">
    <h1>üíç Tabungan Nikah</h1>
    <h2>Target: Rp 250.000.000</h2>

    <div class="input-group">
      <select id="penabung">
        <option value="Yudha">Yudha</option>
        <option value="Fadhillah">Fadhillah</option>
      </select>
      <input type="number" id="jumlahInput" placeholder="Masukkan jumlah (Rp)">
      <button class="add-btn" onclick="tambahTabungan()">‚ûï Tambah</button>
    </div>

    <div class="progress">
      <div class="progress-bar" id="progressBar">0%</div>
    </div>

    <p><b>Total Terkumpul:</b> <span id="total">Rp 0</span></p>
    <p><b>Sisa:</b> <span id="sisa">Rp 250.000.000</span></p>

    <h3>üìú Riwayat Tabungan</h3>
    <ul id="riwayat"></ul>
    <button class="reset-btn" onclick="resetTabungan()">üîÑ Reset Semua Tabungan</button>

    <div class="countdown">
      <h3>‚è≥ Countdown Menuju 5 Tahun Lagi</h3>
      <p id="countdown"></p>
    </div>
  </div>

  <script>
    const target = 250000000;
    let total = parseInt(localStorage.getItem('total')) || 0;
    let riwayat = JSON.parse(localStorage.getItem('riwayat')) || [];

    let targetDate = localStorage.getItem('targetDate');
    if (!targetDate) {
      const now = new Date();
      now.setFullYear(now.getFullYear() + 5);
      targetDate = now;
      localStorage.setItem('targetDate', targetDate);
    } else {
      targetDate = new Date(targetDate);
    }

    function formatRupiah(angka) {
      return 'Rp ' + angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }

    function updateDisplay() {
      document.getElementById('total').innerText = formatRupiah(total);
      document.getElementById('sisa').innerText = formatRupiah(target - total);
      const persen = Math.min((total / target) * 100, 100);
      document.getElementById('progressBar').style.width = persen + '%';
      document.getElementById('progressBar').innerText = Math.floor(persen) + '%';

      let riwayatList = document.getElementById('riwayat');
      riwayatList.innerHTML = '';
      riwayat.forEach((item, index) => {
        let li = document.createElement('li');
        li.innerHTML = `<span>üë§ ${item.nama} | üí∞ ${formatRupiah(item.jumlah)} | üìÖ ${item.tanggal}</span>
          <span>
            <button class="edit-btn" onclick="editTabungan(${index})">‚úèÔ∏è Edit</button>
            <button class="delete-btn" onclick="hapusTabungan(${index})">üóëÔ∏è Hapus</button>
          </span>`;
        riwayatList.appendChild(li);
      });
    }

    function tambahTabungan() {
      let jumlah = parseInt(document.getElementById('jumlahInput').value);
      let nama = document.getElementById('penabung').value;
      if (!jumlah || jumlah <= 0) return;
      let tanggal = new Date().toLocaleString('id-ID');
      total += jumlah;
      riwayat.push({ nama: nama, jumlah: jumlah, tanggal: tanggal });
      localStorage.setItem('total', total);
      localStorage.setItem('riwayat', JSON.stringify(riwayat));
      updateDisplay();
      document.getElementById('jumlahInput').value = '';
    }

    function editTabungan(index) {
      let baru = prompt("Masukkan jumlah baru:", riwayat[index].jumlah);
      if (baru && baru > 0) {
        total -= riwayat[index].jumlah;
        riwayat[index].jumlah = parseInt(baru);
        total += riwayat[index].jumlah;
        riwayat[index].tanggal = new Date().toLocaleString('id-ID');
        localStorage.setItem('total', total);
        localStorage.setItem('riwayat', JSON.stringify(riwayat));
        updateDisplay();
      }
    }

    function hapusTabungan(index) {
      total -= riwayat[index].jumlah;
      riwayat.splice(index, 1);
      localStorage.setItem('total', total);
      localStorage.setItem('riwayat', JSON.stringify(riwayat));
      updateDisplay();
    }

    function resetTabungan() {
      if (confirm('Yakin reset semua tabungan?')) {
        total = 0;
        riwayat = [];
        localStorage.removeItem('total');
        localStorage.removeItem('riwayat');
        updateDisplay();
      }
    }

    function updateCountdown() {
      const now = new Date().getTime();
      const distance = targetDate - now;
      if (distance < 0) {
        document.getElementById('countdown').innerText = "Waktu telah habis!";
        return;
      }
      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);
      document.getElementById('countdown').innerText = `${days} hari ${hours} jam ${minutes} menit ${seconds} detik`;
    }

    updateDisplay();
    setInterval(updateCountdown, 1000);
  </script>
</body>
</html>
